<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Marcus CJH ‚Äî Resume</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: sans-serif;
            background-color: #f8f9fa;
        }

        /* Centered layout */
        #landing {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            text-align: center;
            padding: 2em;
        }

        .resume-box {
            background-color: #fff;
            padding: 2em 3em;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .btn {
            margin-top: 1em;
            margin-right: 1em;
            padding: 12px 24px;
            font-size: 16px;
            background-color: #2d7ff9;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
        }

        .btn:hover {
            background-color: #1a5fcd;
        }

        /* Side-by-side layout */
        #preview {
            display: none;
            height: 100vh;
        }

        .preview-layout {
            display: flex;
            height: 100%;
        }

        .left {
            width: 35%;
            background-color: #ffffff;
            padding: 3em;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: 2px 0 8px rgba(0, 0, 0, 0.05);
        }

        .right {
            width: 65%;
            background-color: #e9ecef;
        }

        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Mobile-specific PDF viewing improvements */
        .mobile-pdf-controls {
            display: none;
            padding: 1em;
            background-color: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }

        .pdf-control-btn {
            margin: 0.25em;
            padding: 8px 16px;
            font-size: 14px;
            background-color: #6c757d;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .pdf-control-btn:hover {
            background-color: #5a6268;
        }

        .pdf-control-btn.active {
            background-color: #2d7ff9;
        }

        @media (max-width: 768px) {
            .preview-layout {
                flex-direction: column;
            }

            .left {
                width: 100%;
                height: auto;
                padding: 2em;
            }

            .right {
                width: 100%;
                height: 70vh;
                position: relative;
            }

            .mobile-pdf-controls {
                display: block;
            }

            iframe {
                height: 100%;
                width: 100%;
            }

            /* Alternative mobile view - full screen PDF */
            .mobile-fullscreen {
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                z-index: 1000;
                background-color: white;
            }

            .mobile-fullscreen iframe {
                height: 100vh;
                width: 100vw;
            }

            .mobile-fullscreen .close-fullscreen {
                position: absolute;
                top: 1em;
                right: 1em;
                z-index: 1001;
                background-color: rgba(0,0,0,0.7);
                color: white;
                border: none;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                font-size: 18px;
                cursor: pointer;
            }

            /* iOS Safari specific fixes */
            @supports (-webkit-touch-callout: none) {
                iframe {
                    -webkit-overflow-scrolling: touch;
                }
                
                .mobile-pdf-controls {
                    position: sticky;
                    top: 0;
                    z-index: 100;
                }
            }
        }
    </style>
</head>
<body>

<!-- Initial centered landing screen -->
<div id="landing">
    <div class="resume-box">
        <h1>MarcusCJH</h1>
        <a href="resume.pdf?v=1" download class="btn">üì• Download Resume</a>
        <button class="btn" onclick="showPreview()">üëÅÔ∏è Preview Resume</button>
    </div>
</div>

<!-- Side-by-side preview layout -->
<div id="preview">
    <div class="preview-layout">
        <div class="left">
            <h1>Marcus CJH</h1>
            <a href="resume.pdf?v=1" download class="btn">üì• Download PDF</a>
            <button class="btn" onclick="hidePreview()">‚ùå Close Preview</button>
        </div>
        <div class="right">
            <div class="mobile-pdf-controls">
                <button class="pdf-control-btn" onclick="toggleFullscreen()">üì± Fullscreen</button>
                <button class="pdf-control-btn" onclick="openInNewTab()">üîó Open in New Tab</button>
                <button class="pdf-control-btn" onclick="downloadPDF()">üì• Download</button>
            </div>
            <iframe id="pdfFrame" src="resume.pdf?v=1" title="Marcus CJH Resume PDF Preview"></iframe>
        </div>
    </div>
</div>

<script>
    function showPreview() {
        document.getElementById('landing').style.display = 'none';
        document.getElementById('preview').style.display = 'block';
    }

    function hidePreview() {
        document.getElementById('preview').style.display = 'none';
        document.getElementById('landing').style.display = 'flex';
    }

    // Mobile PDF viewing functions
    function toggleFullscreen() {
        const rightDiv = document.querySelector('.right');
        const iframe = document.getElementById('pdfFrame');
        
        if (rightDiv.classList.contains('mobile-fullscreen')) {
            // Exit fullscreen
            rightDiv.classList.remove('mobile-fullscreen');
            rightDiv.innerHTML = `
                <div class="mobile-pdf-controls">
                    <button class="pdf-control-btn" onclick="toggleFullscreen()">üì± Fullscreen</button>
                    <button class="pdf-control-btn" onclick="openInNewTab()">üîó Open in New Tab</button>
                    <button class="pdf-control-btn" onclick="downloadPDF()">üì• Download</button>
                </div>
                <iframe id="pdfFrame" src="resume.pdf?v=1" title="Marcus CJH Resume PDF Preview"></iframe>
            `;
        } else {
            // Enter fullscreen
            rightDiv.classList.add('mobile-fullscreen');
            rightDiv.innerHTML = `
                <button class="close-fullscreen" onclick="toggleFullscreen()">‚úï</button>
                <iframe id="pdfFrame" src="resume.pdf?v=1" title="Marcus CJH Resume PDF Preview"></iframe>
            `;
        }
    }

    function openInNewTab() {
        window.open('resume.pdf?v=1', '_blank');
    }

    function downloadPDF() {
        const link = document.createElement('a');
        link.href = 'resume.pdf?v=1';
        link.download = 'Marcus_CJH_Resume.pdf';
        link.click();
    }

    // Detect mobile device and iOS
    function isMobile() {
        return window.innerWidth <= 768;
    }

    function isIOS() {
        return /iPad|iPhone|iPod/.test(navigator.userAgent) || 
               (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
    }

    function isSafari() {
        return /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
    }

    // iOS Safari specific handling
    function handleIOSPDF() {
        if (isIOS() && isSafari()) {
            const iframe = document.getElementById('pdfFrame');
            const controls = document.querySelector('.mobile-pdf-controls');
            
            // Add iOS-specific warning and controls
            const iosWarning = document.createElement('div');
            iosWarning.style.cssText = `
                background-color: #fff3cd;
                border: 1px solid #ffeaa7;
                color: #856404;
                padding: 10px;
                margin: 10px 0;
                border-radius: 4px;
                font-size: 14px;
            `;
            iosWarning.innerHTML = `
                <strong>üì± iOS Safari Note:</strong> For the best PDF viewing experience on iOS, 
                use "Open in New Tab" or "Download" options below.
            `;
            
            if (controls) {
                controls.parentNode.insertBefore(iosWarning, controls);
            }

            // Make "Open in New Tab" more prominent for iOS
            const openInNewTabBtn = controls.querySelector('button[onclick="openInNewTab()"]');
            if (openInNewTabBtn) {
                openInNewTabBtn.style.backgroundColor = '#28a745';
                openInNewTabBtn.innerHTML = 'üîó Open in Safari (Recommended)';
            }

            // Add direct Safari opening option
            const safariBtn = document.createElement('button');
            safariBtn.className = 'pdf-control-btn';
            safariBtn.style.backgroundColor = '#007bff';
            safariBtn.innerHTML = 'üì± Open in Safari App';
            safariBtn.onclick = function() {
                // Try to open in Safari app
                window.location.href = 'resume.pdf?v=1';
            };
            controls.appendChild(safariBtn);
        }
    }

    // Initialize mobile controls and iOS handling
    document.addEventListener('DOMContentLoaded', function() {
        if (isMobile()) {
            document.querySelector('.mobile-pdf-controls').style.display = 'block';
        }
        handleIOSPDF();
    });
</script>

</body>
</html>
